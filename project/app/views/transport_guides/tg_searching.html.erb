<div class="span-24 last" >
  <%= form_tag({:action=> 'get_list_tg', :remote=>'true'}) do |f| %>

    <fieldset>
      <legend>Buscar Guias de Transportes</legend>
      <ul>
        <li>
          <label>Numero de Guia:</label>
          <input type="text" size="6" maxlength="6"></input>
        </li>
        <li>
          <label>Fecha De Creaci√≥n:</label>
          <%= text_field 'search', 'created_at', class: 'i_fecha'%>
        </li>
        <div class="clear"></div>
        <li>
          <label>Cliente:</label>
          <input id="customer" type="text" size="20" maxlength="20" class="i_autocomplit"></input>
          <%=hidden_field 'search', 'customer_id'%>
        </li>
        <li>
          <label>Estado:</label>
          <%=select( 'search',"transport_guide_state_id", @transport_guide_states )%>
        </li>
        <div class="clear"></div>
        <li>
          <label>Origen:</label>
          <input id="origin_city" type="text" size="20" maxlength="20" class="i_autocomplit"></input>
          <%=hidden_field 'search', 'origin_city_id'%>
        </li>
        <li>
          <label>Destino:</label>
          <input id="destination_city" type="text" size="20" maxlength="20" class="i_autocomplit"></input>
          <%=hidden_field 'search', 'destination_city_id'%>
        </li>
      </ul>
      <div class="span-24 center prepend-top last" >
        <%= submit_tag 'Buscar', id: 'search_button' , method: 'post'%>
        <%= link_to 'Limpiar','#', class: 'limpiar button'%>
          <%= link_to 'Cancelar' ,'../main_page/index' ,class: 'button', id: 'cancel_button'%>
          </div>


        </fieldset>
      <%end%>
  <div id="table_searching" class="span-24">
    <%= render 'transport_guide_list'  %>
  </div>
    </div>
    <script charset="utf-8" type="text/javascript">
    <%#*$(document).ready(function() {%>
    <%#*$('table[class*=tablaIndex]').dataTable({%>
    <%#*"bScrollCollapse" : true,%>
    <%#*"sPaginationType" : "full_numbers",%>
    <%#*"aLengthMenu" : [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]]%>
    <%#*});%>
      //focus en el formulario
      $("form:not(.filter) :input:visible:enabled:first").focus();
      //Autocomplite de clientes (clientes)
      $(function() {
        var list =[];
        var i=0;
    <% @customers.each do |c| %>
          list[i]={
            label: "<%= if c.customer_type_id == 2 then c.last_name + " " + c.name  else c.company_name end %>",
            id: <%= c.id %>};
          i=i+1;
    <% end %>
        $("#customer").autocomplete({
          source: list,
          select: function(event, ui) {
            $("#search_customer_id").val(ui.item.id);

          }

        });

      });
      $(function(){
        //AutoComplite de Origenes y destino
        var list =[];
        var i=0;
    <% @cities.each do |c| %>
          list[i]={
            label: "<%= c.name%>",
            id: <%= c.id %> };
          i=i+1;
    <% end %>
        $("#origin_city").autocomplete({
          source: list,
          select: function(event, ui) {
            $("#search_origin_city_id").val(ui.item.id);

          }
        });
        $("#destination_city").autocomplete({
          source: list,
          select: function(event, ui) {
            $("#search_destination_city_id").val(ui.item.id);

          }
        });
      });

    </script>